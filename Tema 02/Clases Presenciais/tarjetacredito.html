<!DOCTYPE html>
<html>
	<head>
		<script type="text/javascript">
			function divideNumero(numero,t) {
				var idx=0;
				while(numero>0) {
					t[idx]=numero%10;
					numero=Math.trunc(numero/10);
					idx++;
				}
				return idx;
			}

			function duplicarImpares(t) {
				var idx=1;
				while(idx<t.length) {
					t[idx]=2*t[idx];
					// Reducción: Primer dígito+Segundo dígito
					t[idx]=(Math.trunc(t[idx]/10))+(t[idx]%10);
					idx=idx+2;
				}
			}

			function verificaTarjeta() {
				var tabla=new Array();
				var correcta=false;
				var numero=parseInt(document.getElementById("tjn").value);
				var longitud=divideNumero(numero,tabla);
				if ((longitud==16)||(longitud==15)) {
					duplicarImpares(tabla);
					//
					// Calcular el total de la suma de los numeros de la tabla
					//
					var idx=0;
					var total=0
					while(idx<tabla.length) {
						total=total+tabla[idx];
						idx=idx+1
					}
					control=10-(total%10)
					if (tabla[0]==control) correcta=true;	
					alert(correcta);
				}
			}
		</script>
	</head>
	<body>
		<div>Introduce el número de tarjeta: <input type="text" name="tarjeta" id="tjn"/></div>
		<div><input type="button" value="Verificar" onclick="verificaTarjeta()"/></div>
		<div id="output"></div>
	</body>
</html>
